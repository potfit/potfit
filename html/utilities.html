<!--#include virtual="potfithead.html" -->
<!-- Copyright (c)  2005-2008  Peter Brommer, Franz Gaehler, ITAP.         -->
<!-- Permission is granted to copy, distribute and/or modify this document -->
<!-- under the terms of the GNU Free Documentation License, Version 1.2    -->
<!-- or any later version published by the Free Software Foundation;       -->
<!-- with Invariant Sections being the files potfit.html/index.html and    -->
<!-- licence.html, the Front-Cover Text "potfit - a force-matching         -->
<!-- program", and the Back-Cover Text "potfit was originally developed by -->
<!-- Peter Brommer during his diploma thesis work."                        -->
<!-- A copy of the license is included in the section entitled             -->
<!-- "Licence - Documentation".                                            -->

<h1>Utility Programs</h1>

<p>
The <b>potfit/util</b> directory contains a number of utility programs 
for the preparation of <em>potfit</em> input files and the postprocessing of 
<em>potfit</em> output files. 
</p>

<table cellpadding="4" summary="utility programs">
<tr><td><a href="#force2poscar">force2poscar</a></td>
    <td>Converts force files (<a
href="http://www.itap.physik.uni-stuttgart.de/~imd/">IMD</a> output)
to vasp POSCAR files.</td></tr>
<tr><td><a href="#vasp2force">vasp2force.sh</a></td>
    <td>Converts vasp output (POSCAR, OUTCAR) to reference
    configuration data.</td></tr>
<tr><td><a href="#pottrans">pottrans</a></td>
    <td>Converts various <a
href="http://www.itap.physik.uni-stuttgart.de/~imd/">IMD</a> and
<em>potfit</em> potential formats.</td></tr>
<tr><td><a href="#listconfig">list_config.sh</a></td>
    <td>List all configurations in a configuration file.</td></tr>
<tr><td><a href="#potfit_setup">potfit_setup</a></td>
    <td>Creates a parameter file for potfit from scratch.</td></tr>
<tr><td><a href="#awk">awk scripts</a></td>
    <td>A series of awk scripts to handle various tasks with potential files,
    like combining, appending, creating from analytical functions, generating from scratch, plotting,...</td></tr>
<tr><td><a href="#potscale">potscale</a></td>
    <td>Performs gauge transformations of <em>potfit</em> EAM
    potentials.</td></tr>
</table>

<h2><a id="force2poscar" name="force2poscar">force2poscar</a></h2>
<p>Converts force files produced by <a
href="http://www.itap.physik.uni-stuttgart.de/~imd/">IMD</a> and used
by <em>potfit</em> to <a
href="http://cms.mpi.univie.ac.at/vasp/">vasp</a> input file
POSCAR.</p>
<pre>
Compilation: make force2poscar [-DSTRESS]

Usage: force2poscar input.force
</pre>
<p>
The information is always written to a file called POSCAR residing in
the local directory. Use compile option <tt>-DSTRESS</tt> if your
force file includes stress tensor information.</p>

<h2><a id="vasp2force" name="vasp2force">vasp2force.sh</a></h2>
<p>Converts <a href="http://cms.mpi.univie.ac.at/vasp/">vasp</a>
output to force files.</p>
<pre>
Compilation: make vasp2force

Usage: vasp2force.sh: [-c list] [-e file] [-f] [-l] [-r] [-s list] &lt;OUTCAR files&gt;
</pre>
<p> Reads information from all OUTCAR files in the current directory. 
&lt;OUTCAR files&gt; is an optional list of files, if not given all files 
matching OUTCAR* will be scanned (it is possible to read gzipped 
files ending with .gz).<br />
An optional file can be specified, containing the energy of a single free atom
calculated by <a href="http://cms.mpi.univie.ac.at/vasp/">vasp</a> in
a single line in the same order as in the OUTCAR file, e.g.:</p>
<pre>
-0.000219 -0.993872 -0.855835
# Al      Co        Ni
</pre>
<p>Writes a force file to be used as a <em>potfit</em> reference
configuration to standard output. If no options are given, force data is
generated from each ionic step.</p>
<p>Options:</p>
<dl>
<dt>-c &lt;list&gt;</dt>
<dd>list of chemical species to use (e.g. "vasp2force.sh -c Al=0,Mn=1,Pd=2")<br />
This will force all atom types in all configurations to be consistent.</dd>
<dt>-e &lt;file&gt;</dt>
<dd>Specify file to read single atom energies from; if not found, "0" will be used for every atom type.</dd>
<dt>-f</dt>
<dd>Uses only final configuration of multiple ionic steps.</dd>
<dt>-l</dt>
<dd>List all chemical species found in OUTCAR and exit.</dd>
<dt>-r</dt>
<dd>Scan recursively for OUTCAR files in every subdirectory.</dd>
<dt>-s list</dt>
<dd>List is a comma separated list of ionic steps to use, e.g. "1,4,7,9". The
sequence of the force data is always the same as in the OUTCAR file,
independent of the sequence given in the list. Every configuration mentioned
appears exactly once.</dd>
</dl>

<h2><a id="pottrans" name="pottrans">pottrans</a></h2>

<p>Converts betweeen various potential models.</p>
<pre>
Compilation:  make pottrans

Usage:        pottrans &lt;paramfile&gt;

required parameters in paramfile (here with example values)

ntypes     2           # number of atom types
ncols      3           # number of output potentials
infile     in.pot      # input potential file for pair potentials
outfile    out.pot     # output potential file
nsteps     20 20 20    # number of steps for the output potentials
atomic_e-density_file  rho.pot   # atomic density for EAM potentials
embedding_energy_file  embed.pot # embedding energy for EAM potentials
core_potential_file    phi.pot   # pair potential for EAM potentials

#optional parameters

reorder     0 1        # permutes order of potentials in final file,
                       # ntypes parameters necessary
r_start   1.8 1.8 1.8  # minimal r for each column in output potential

</pre>
<p>in.pot is converted to out.pot. in.pot can be of <a
href="http://www.itap.physik.uni-stuttgart.de/~imd/">IMD</a> potential
format 1 or 2, out.pot is of <em>potfit</em> <a
href="potformat.html">potential format</a>. For EAM potentials, specify the
appropriate number of columns in ncols and the required IMD format potential
files. The order of the different atom types can be changed with the
<tt>reorder</tt> parameter by specifying the desired sequence.</p> 
<p>To convert from
<em>potfit</em> to IMD use <em>potfit</em> with <tt>opt 0</tt> in
parameter file. 
</p>


<h2><a id="listconfig" name="listconfig">list_config.sh</a></h2>
<p>Scans a potfit configuration file and lists all configurations found. This includes the
origin (if comment is found), the starting line, number of atoms and weight of the configuration.
</p>


<h2><a id="potfit_setup" name="potfit_setup">potfit_setup</a></h2>
<p>
This utility generates a simple parameter file for potfit.
</p>
<pre>
Usage: potfit_setup: [-c config file] [-p potential file] [-s prefix]

-c &lt;config file&gt;       name of the configuration file
-p &lt;potential file&gt;    name of the potential file
                                for analytic potentials this can easily be created with
                                the makeapot script from the awkscripts
-s &lt;prefix&gt;            prefix for all files, overrides -c and -p
                                the following files will be checked:
                                &lt;prefix&gt;.pot and &lt;prefix&gt;.config
                                if they are not found, -c and -p will be read
</pre>

<h2><a id="awk" name="awk">awk scripts</a></h2>
<p>A series of awk scripts to help with tasks concerning potential files. </p>
<pre>
Compilation: make awkscripts
</pre>

<h3>add_type.awk</h3>
<p>add_type adds potentials for another atom type to an existing EAM
potential.</p>
<pre>
Usage:       add_type.awk orig_eam.pt add_eam.pt cross_pair1.pt ...

add_type.awk needs the following arguments
  orig_eam.pt    - original EAM potential for n atom types.
  add_eam.pt     - EAM potential for additional atom type (3 columns).
  cross_pair*.pt - old-new pair interaction potential, each 1 column.
                   (1 file for each original atom type, n in total).
</pre>
<p>The potentials are rearranged in the proper order. The resulting potential
is written to standard output.</p>

<h3>combine_eam.awk</h3>
<p>combine_eam.awk combines single potentials from separate files into a
single potential file.
</p>
<pre>
Usage:       combine_eam.awk potential1.pt potential2.pt ....

  where potential1.pt ... are files containing a single potential.
</pre>
<p>Combines all potentials into one single potential file written to 
  standard output. Can be used to combine three potentials to form
  an EAM potential, but will combine any files containing only 
  a single potential.</p>
<h3>genpot.awk</h3>
<p>genpot is an interactive AWK script that generates an interpolated
representation of an analytic potential with an arbitrary number of parameters.</p>
<pre>
Usage:       genpot.awk
</pre>
<p>genpot takes no parameters, however the parameters of the potentials are
read from standard input and may of course be supplied through a pipe (one
parameter on each line). The sequence of the parameters is as follows:</p>
<dl>
<dd>mindist</dd><dt>Minimal distance in table.</dt>
<dd>maxdist</dd><dt>Maximal distance in table.</dt>
<dd>nsamp  </dd><dt>Number of sampling points.</dt>
<dd>type   </dd><dt>Potential function to be used (s. below)</dt>
<dd>params </dd><dt>Space separated list of all parameters.</dt>
</dl>
<p>genpot does not verify or validate any parameter or input value.</p>
<p> Potential functions supported:</p>
<ol start="0">
<li>f(r)=0 &ndash; Potential which is zero everywhere.</li>
<li>f(r)=a<sub>1</sub>*r<sup>-12</sup> &ndash; Repulsive part of Lennard-Jones
potential.
</li>
<li>f(r)=a<sub>1</sub>*exp(-a<sub>2</sub>*r) &ndash; Exponential decay. </li>
<li>f(r)=a<sub>1</sub>*(r-a<sub>2</sub>)^2 + a<sub>3</sub> &ndash; Parabola
with vertex (a<sub>2</sub>,a<sub>3</sub>).</li>
</ol>

<h3>makeapot</h3>
<p>
Generate analytic potential files for <em>potfit</em> from scratch.
</p>
<pre>
Usage: makeapot [-cp] [-n x identifier]
</pre>
<p>
<tt>makeapot</tt> takes two different types of parameters. For analytic pair potentials
you can add chemical potentials with the <tt>-cp</tt> switch.<br />
The second type of parameter is the number and type of a specific potential. The type is the same
as the <a href="models.html">identifier</a> for the analytic potentials.</p>
<p>
The command 
</p>
<pre>
makeapot -n 6 eopp_sc -n 3 csw_sc -n 3 pohlong
</pre>
<p>
will generate a potential file with 6 eopp_sc, 3 csw_sc and 3 pohlong potentials and write
it to the standard output.
</p>

<h3>plotapot</h3>
<p>
This utility plots an analytic potential with gnuplot. 
</p>
<pre>
Usage: plotapot &lt;potential file&gt; &lt;radial distribution file&gt;
</pre>
<p>
There are no options, you have to give the potential file, the radial distribution file is optional.</p>


<h2><a id="potscale" name="potscale">potscale - not maintained any more.</a></h2>
<p>potscale performs gauge transformations on EAM potentials. </p>
<pre>
Compilation: make potscale

Usage:       potscale &lt;paramfile&gt;

#required parameters in paramfile

ntypes		# number of atom types (types vary in [0..ntypes-1]) 
startpot	# file name for starting potential (*)
endpot		# file name for final potential (*)
imdpot		# file name prefix for imd potential (*)
plotfile	# file name for plotting potential (*)
plotpointfile	# file name for plotting the sampling points (*)

imdpotsteps 	# number of points in each function in imd file
dummy_r		# Distance, where dummy_rho and dummy_phi are used (ignored)

#optional options
dummy_rho 	# dummy value of rho at dummy_r
dummy_phi	# vector (length ntypes) dummy values of phi_ii at dummy_r
</pre>

<p>Prints the values of &rho;<sub>0</sub>(dummy_r) and
&Phi;<sub>ii</sub>(dummy_r). If dummy_phi is given, the potential is
transformed so that &rho;<sub>0</sub>(dummy_r)=dummy_rho and
&Phi;<sub>ii</sub>(dummy_r)=dummy_phi_ii. IMD potentials and potential plot
files are also written.</p> 


<!--#include virtual="potfitfoot.html" -->
